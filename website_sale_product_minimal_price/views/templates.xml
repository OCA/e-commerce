<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2019 Tecnativa - Sergio Teruel
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>

    <template id="variants" inherit_id="website_sale.variants">
        <!-- Sort product attribute values by minimal price extra -->
        <xpath expr="//t[@t-if=&quot;variant_id.attribute_id.type == &apos;select&apos;&quot;]//t[@t-foreach='variant_id.value_ids']" position="attributes">
            <attribute name="t-foreach">variant_id.value_ids.sorted(key=lambda x: x.price_extra)</attribute>
        </xpath>
        <xpath expr="//t[@t-if=&quot;variant_id.attribute_id.type == &apos;radio&apos;&quot;]//t[@t-foreach='variant_id.value_ids']" position="attributes">
            <attribute name="t-foreach">variant_id.value_ids.sorted(key=lambda x: x.price_extra)</attribute>
        </xpath>
        <xpath expr="//li[@t-foreach='variant_id.value_ids']" position="attributes">
            <attribute name="t-foreach">variant_id.value_ids.sorted(key=lambda x: x.price_extra)</attribute>
        </xpath>
    </template>

    <template id="products_item" inherit_id="website_sale.products_item">
        <!-- Display "From" if variants have distinct extra prices -->
        <xpath expr="//span[@t-esc='product.website_price']" position="before">
            <t t-if="product.has_variant_price_extra">
                <span>From </span>
            </t>
        </xpath>
    </template>

</odoo>
