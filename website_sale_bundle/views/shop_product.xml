<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2016 Jairo Llopis <jairo.llopis@tecnativa.com>
     License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl). -->
<odoo>

<template id="bundle_direct"
          inherit_id="website_sale.product"
          customize_show="True"
          priority="25"
          name="Bundled Products">
    <xpath expr="//*[@t-field='product.description_sale']/.." position="after">
        <div
            t-if="product.bundle_line_ids"
            class="o_product_bundle_direct">
            <hr/>
            <h5>This <strong>bundle</strong> includes:</h5>
            <ul class="list-unstyled">
                <t t-foreach="product.bundle_line_ids" t-as="bundle_line">
                    <li>
                        <t t-if="bundle_line.sudo().product_id.website_published">
                            <a t-attf-href="/shop/product/#{slug(bundle_line.product_id.product_tmpl_id)}"
                               t-esc="bundle_line.product_id.display_name"/>
                        </t>
                        <t t-if="not (bundle_line.sudo().product_id.website_published)">
                            <span t-esc="bundle_line.sudo().product_id.display_name"/>
                        </t>
                        <span class="o_product_bundle_qty text-muted">
                            -
                            <span t-esc="bundle_line.qty"/>
                            <span t-esc="bundle_line.sudo().product_id.uom_id.display_name"/>
                        </span>
                    </li>
                </t>
            </ul>
        </div>
    </xpath>
</template>

<template id="bundle_inverse"
          inherit_id="website_sale.product"
          customize_show="True"
          priority="20"
          name="Display Bundles Including This Product">
    <xpath expr="//*[@t-field='product.description_sale']/.." position="after">
        <div
            t-if="product.inverse_bundle_line_ids"
            class="o_product_bundle_inverse">
            <hr/>
            <h5>Find this product in one of these bundles:</h5>
            <ul class="list-unstyled">
                <t t-foreach="product.inverse_bundle_line_ids" t-as="bundle_line">
                    <li>
                        <a t-attf-href="/shop/product/#{slug(bundle_line.bundle_id.product_tmpl_id)}"
                           t-esc="bundle_line.bundle_id.display_name"/>
                    </li>
                </t>
            </ul>
        </div>
    </xpath>
</template>

</odoo>
